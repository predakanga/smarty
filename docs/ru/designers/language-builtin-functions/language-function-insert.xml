<?xml version="1.0" encoding="windows-1251"?>
<!-- $Revision$ -->
<!-- EN-Revision: 1.1 Maintainer: freespace Status: ready -->
<sect1 id="language.function.insert">
 <title>insert</title>
 <informaltable frame="all">
  <tgroup cols="5">
  <colspec colname="param" align="center" />
  <colspec colname="type" align="center" />
  <colspec colname="required" align="center" />
  <colspec colname="default" align="center" />
  <colspec colname="desc" />
  <thead>
   <row>
    <entry>Имя атрибута</entry>
    <entry>Тип</entry>
    <entry>Обязателен</entry>       
    <entry>По умолчанию</entry>
    <entry>Описание</entry>
   </row>
  </thead>
  <tbody>
   <row>
    <entry>name</entry>
    <entry>строка (string)</entry>
    <entry>Да</entry>
    <entry><emphasis>n/a</emphasis></entry>
    <entry>Имя функции вставки (insert_name)</entry>
   </row>
   <row>
    <entry>assign</entry>
    <entry>строка (string)</entry>
    <entry>Нет</entry>
    <entry><emphasis>n/a</emphasis></entry>
    <entry>Имя переменной, которой будет 
    присвоен вывод</entry>
   </row>
   <row>
    <entry>script</entry>
    <entry>строка (string)</entry>
    <entry>Нет</entry>
    <entry><emphasis>n/a</emphasis></entry>
    <entry>Имя php файла, который будет подключен
    перед вызовом функции вставки</entry>
   </row>
   <row>
    <entry>[var ...]</entry>
    <entry>[var type]</entry>
    <entry>Нет</entry>
    <entry><emphasis>n/a</emphasis></entry>
    <entry>Переменные, передаваемые в 
    функцию вставки</entry>
   </row>
  </tbody>
  </tgroup>
 </informaltable>
 <para>
  Тэг insert очень похож на тэг include, кроме случая, когда
  <link linkend="caching">кэширование</link> включено. Insert 
  тэг не кешируется. Он будет выполнен каждый раз, при обращении
  к шаблону.
 </para>
 <para>
  Допустим вы имеете шаблон с баннером вверху страницы.
  Баннер может содержать любую смесь HTML, исзображенй,
  flash и т.д., то есть нельзя использовать просто 
  статическую ссылку, и мы не хотим, чтобы код баннера
  кэшировался с остальной страницей. Тогда используем
  тэг insert: шаблон знает значения #banner_location_id# и
  #site_id# (взяты из файла конфигурации) и должен вызвать
  функцию, чтобы получить код баннера.
 </para>
 <example>
  <title>функция insert</title>
  <programlisting>
<![CDATA[
{* пример установки баннера *}
{insert name="getBanner" lid=#banner_location_id# sid=#site_id#}
]]>
  </programlisting>
 </example>
	<para>
  В этом примере мы используем имя "getBanner" и передаем параметры
  #banner_location_id# и #site_id#. Smarty попробует вызывать
  функцию insert_getBanner() в вашей PHP программе, передав
  значения #banner_location_id# и #site_id# первым параметром в виде 
  ассоциативного массива. Все имена функций вставки должны начинаться
  с "insert_" для предотвращения возможных конфликтов имен. Функция
  insert_getBanner() должна обработать переданные переменные и 
  вернуть	результат. Он будет отображен в шаблоне вместо тэга insert.
  В данном случае Smarty вызовет функцию insert_getBanner(array("lid"
  => "12345","sid" => "67890")); и выведет результат на месте тэга
  insert.
	</para>
	<para>
  Если указан атрибут "assign", то вывод функции вставки будет 
  присвоен указанной переменной вместо отображения. ЗАМЕЧАНИЕ:
  присвоение вывода тэга insert переменной шаблона не очень 
  полезно, когда кеширование включено.
	</para>
	<para>
  Если указан атрибут "script", то указанный php файл будет
  подключен (только однажды) перед вызовом функции вставки. 
  Это удобно, когда функция может не сущетсвовать, и должен быть
  подключен php файл, чтобы определить функцию. Путь к файлу
  должен быть либо абсолтным, либо относительным относительно
  $trusted_dir. Когда security активирована, то php файл должен 
  быть в папке $trusted_dir.
	</para>
	<para>
  Обьект Smarty передается в функцию как второй параметр. 
  Так вы можете использовать и модифицировать информацию
  из объекта Smarty в функциях вставки.
	</para>
	<note>
		<title>Техническое Замечание</title>
		<para>
   Некоторые части шаблона можно не кэшировать.
   Если активировано <link linkend="caching">кэширование</link>,
   то тэг insert все равно не будет кэширован. Он будет вызван
   каждый раз при генерации страницы, даже из кешированных
   страниц. Это полезно для таких вещей, как баннеры, опросы,
   прогнозы погоды, результаты поиска, области обратной связи
   и т.д.
		</para>
	</note>
</sect1>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->

