<?xml version="1.0" encoding="iso-8859-1"?>
<!-- $Revision$ -->
<!-- EN-Revision: 1.6 Maintainer: gerald Status: ready -->
<sect1 id="language.function.section">
 <title>section, sectionelse</title>
 <informaltable frame="all">
  <tgroup cols="5">
   <colspec colname="param" align="center" />
   <colspec colname="type" align="center" />
   <colspec colname="required" align="center" />
   <colspec colname="default" align="center" />
   <colspec colname="desc" />
   <thead>
    <row>
     <entry>Nom attribut</entry>
     <entry>Type</entry>
     <entry>Requis</entry>
     <entry>Defaut</entry>
     <entry>Description</entry>
    </row>
   </thead>
   <tbody>
    <row>
     <entry>name</entry>
     <entry>chaîne de caractère</entry>
     <entry>Oui</entry>
     <entry><emphasis>n/a</emphasis></entry>
     <entry>Le nom de la section</entry>
    </row>
    <row>
     <entry>loop</entry>
     <entry>mixed</entry>
     <entry>Oui</entry>
     <entry><emphasis>n/a</emphasis></entry>
     <entry>valeur qui détermine le nombre de fois que la boucle sera exécutée.</entry>
    </row>
    <row>
     <entry>start</entry>
     <entry>entier</entry>
     <entry>Non</entry>
     <entry><emphasis>0</emphasis></entry>
     <entry>La position de l'index ou la section commencera son
      parcours. Si la valeur donnée est négative, la position de
      départ est calculée depuis la fin du tableau. Par exemple,
      s'il existe 7 valeurs dans le tableau à parcourir et que start
      est à -2, l'index de départ sera 5. Les valeurs incorrectes
      (en dehors de la portée du tableau) sont automatiquements
     tronquées à la valeur correcte la plus proche.</entry>
    </row>
    <row>
     <entry>step</entry>
     <entry>entier</entry>
     <entry>Non</entry>
     <entry><emphasis>1</emphasis></entry>
     <entry>La valeur du pas qui sera utilisé pour parcourir le
      tableau.Par exemple, step=2 parcourera les indices
      0,2,4, etc. Si step est négatif, le tableau sera parcouru en sens
     inverse.</entry>
    </row>
    <row>
     <entry>max</entry>
     <entry>entier</entry>
     <entry>Non</entry>
     <entry><emphasis>1</emphasis></entry>
     <entry>Définit le nombre maximum de fois que le tableau sera
     parcouru.</entry>
    </row>
    <row>
     <entry>show</entry>
     <entry>booléen</entry>
     <entry>Non</entry>
     <entry><emphasis>true</emphasis></entry>
     <entry>Détermine s'il est nécessaire d'afficher la
     section ou non.</entry>
    </row>
   </tbody>
  </tgroup>
 </informaltable>
 <para>
  Les balises <emphasis>section</emphasis> sont utilisées pour
  parcourir un tableau de données. Toutes les balises
  <emphasis>section</emphasis> doivent être utilisées de paire avec
  les balises <emphasis>/section</emphasis>. Les paramètres requis
  sont <emphasis>name</emphasis> et <emphasis>loop</emphasis>.
  Le nom de la section est, selon votre choix, composé de lettres,
  chiffres et underscores. Les sections peuvent être imbriquées,
  mais leurs noms doivent être uniques. La variable de parcours
  (généralement un tableau de données) détermine le nombre de fois
  que la section sera parcourue. Lorsque l'on affiche une variable
  dans une section, le nom de la section doit précéder
  la variable entre crochets. <emphasis>sectionelse</emphasis>
  est exécuté lorsqu'aucune valeur n'est trouvée dans la variable à
  parcourir.
 </para>
 <example>
  <title>section</title>
  <programlisting>
 <![CDATA[
{* Cet exemple va afficher toutes les valeurs du tableau $idClient *}
{section name=client loop=$idClient}
  id: {$idClient[client]}<br />
{/section}
]]>
  </programlisting>
  <para>
   L'exemple ci-dessus affichera :
  </para>
  <screen>
<![CDATA[
id: 1000<br />
id: 1001<br />
id: 1002<br />
]]>
  </screen>
 </example>

 <example>
  <title>section, variable de parcours</title>
  <programlisting>
<![CDATA[
{* La variable de parcours détermine uniquement le nombre de fois que nous allons
   rentrer dans la boucle. Vous pouvez accéder à toutes les variables du template
   lorsque vous êtes dans une section. Cet exemple part du principe que
   $idClient, $noms et $adresses sont tous des tableaux qui contiennent
   autant de valeurs les uns que les autres.*}
{section name=client loop=$idClient}
  id: {$idClient[client]}<br />
  nom: {$noms[client]}<br />
  addresse: {$addresses[client]}<br />
  <p>
{/section}
]]>
  </programlisting>
  <para>
   L'exemple ci-dessus affichera :
  </para>
  <screen>
<![CDATA[
id: 1000<br />
nom: John Smith<br />
addresse: 253 N 45th<br />
<p>
id: 1001<br />
nom: Jack Jones<br />
addresse: 417 Mulberry ln<br />
<p>
id: 1002<br />
nom: Jane Munson<br />
addresse: 5605 apple st<br />
<p>
]]>
  </screen>
 </example>

 <example>
  <title>nom de section</title>
  <programlisting>
<![CDATA[
{* Le nom de la section peut être ce que vous voulez,
   et est utilisé pour référencer les données depuis la section. *}
{section name=monTableau loop=$idClient}
  id: {$idCLient[monTableau]}<br />
  name: {$noms[monTableau]}<br />
  address: {$addresses[monTableau]}<br />
  <p>
{/section}
]]>
  </programlisting>
 </example>

 <example>
  <title>sections imbriquées</title>
  <programlisting>
<![CDATA[
{* Les sections peuvent être imbriquées à un nombre de niveaux illimité.
   Grâce aux sections imbriquées, vous pouvez accéder à des structures de données
   complexes, comme des tableaux multi-dimentionnels. Dans cet exemple,
   $type_contact[client] est un tableau de type de contact pour le client
   courant. *}
{section name=client loop=$idClient}
  id: {$idClient[client]}<br />
  nom: {$nom[client]}<br />
  addresse: {$addresse[client]}<br />
  {section name=contact loop=$type_contact[client]}
    {$type_contact[client][contact]}: {$info_contact[client][contact]}<br />
  {/section}
  <p>
{/section}
]]>
  </programlisting>
  <para>
   L'exemple ci-dessus affichera :
  </para>
  <screen>
<![CDATA[
id: 1000<br />
nom: John Smith<br />
addresse: 253 N 45th<br />
telephone: 555-555-5555<br />
telephone portable: 555-555-5555<br />
e-mail: john@myexample.com<br />
<p>
id: 1001<br />
nom: Jack Jones<br />
addresse: 417 Mulberry ln<br />
telephone: 555-555-5555<br />
telephone portable: 555-555-5555<br />
e-mail: jack@myexample.com<br />
<p>
id: 1002<br />
nom: Jane Munson<br />
addresse: 5605 apple st<br />
telephone: 555-555-5555<br />
telephone portable: 555-555-5555<br />
e-mail: jane@myexample.com<br />
<p>
]]>
  </screen>
 </example>

 <example>
  <title>Sections et tableaux associatifs</title>
  <programlisting>
<![CDATA[
{* Exemple d'affichage d'un tableau associatif dans une section *}
{section name=client loop=$contacts}
  nom: {$contacts[client].name}<br />
  telephone: {$contacts[client].home}<br />
  portable: {$contacts[client].cell}<br />
  e-mail: {$contacts[client].email}<p>
{/section}
]]>
  </programlisting>
  <para>
   L'exemple ci-dessus affichera :
  </para>
  <screen>
<![CDATA[
nom: John Smith<br />
telephone: 555-555-5555<br />
portable: 555-555-5555<br />
e-mail: john@myexample.com<p>
nom: Jack Jones<br />
telephone: 555-555-5555<br />
portable: 555-555-5555<br />
e-mail: jack@myexample.com<p>
nom: Jane Munson<br />
telephone: 555-555-5555<br />
portable: 555-555-5555<br />
e-mail: jane@myexample.com<p>
]]>
  </screen>
 </example>

 <example>
  <title>sectionelse</title>
  <programlisting>
<![CDATA[
{* sectionelse est exécuté s'il n'existe aucune valeur dans idClient *}
{section name=client loop=$idClient}
  id: {$idClient[client]}<br />
{sectionelse}
  Aucune valeur dans $idClient.
{/section}
]]>
  </programlisting>
 </example>
 <para>
  Les sections ont leur propre variable de gestion des propriétés.
  Elles sont de la forme: {$smarty.section.nomSection.nomVariable}
 </para>
 <para>
  NOTE: Depuis Smarty 1.5.0, la syntaxe pour les propiétés des sections
  a été changée de {%sectionname.varname%} à
  {$smarty.section.nomSection.nomVariable}. L'ancienne syntaxe est toujours
  supportée, mais vous ne verrez que des exemples avec la nouvelle syntaxe
  dans le manuel.
 </para>
 <sect2 id="section.property.index">
  <title>index</title>
  <para>
   Index est utilisé pour afficher l'index de parcours courant, commence par
   0 (ou l'attribut start), et s'incrémente de 1 (ou de la valeur
   de l'attribut step).
  </para>
  <note>
   <title>Note technique</title>
   <para>
    Si les attributs step et start ne sont pas modifiés, alors index
    fonctionne de la même façon que iteration, à l'exception qu'il commence
    par 0 plutôt que par 1.
   </para>
  </note>
  <example>
   <title>propriété de section index</title>
<programlisting>
<![CDATA[
{section name=client loop=$idClient}
{$smarty.section.client.index} id: {$idClient[client]}<br />
{/section}
]]>
  </programlisting>
  <para>
   L'exemple ci-dessus affichera :
  </para>
  <screen>
<![CDATA[
  0 id: 1000<br />
  1 id: 1001<br />
  2 id: 1002<br />
]]>
   </screen>
  </example>
 </sect2>
 <sect2 id="section.property.index.prev">
  <title>index_prev</title>
  <para>
   index_prev est utilisé pour afficher l'index de parcours
   précédent de la boucle. Au premier passage, il vaut -1.
  </para>
  <example>
   <title>propriété de section index_prev</title>
   <programlisting>
<![CDATA[
  {section name=client loop=$idClient}
  {$smarty.section.client.index} id: {$idClient[client]}<br />
  {* Pour votre information, $idClient[client.index] and $idClient[client] sont identiques *}
  {if $idClient[client.index_prev] ne $idClient[client.index]}
    L'id du client à été modifié<br />
  {/if}
  {/section}
]]>
   </programlisting>
   <para>
    L'exemple ci-dessus affichera :
   </para>
   <screen>
<![CDATA[
  0 id: 1000<br />
  L'id du client à été modifié<br />
  1 id: 1001<br />
  L'id du client à été modifié<br />
  2 id: 1002<br />
  L'id du client à été modifié<br />
]]>
   </screen>
  </example>
 </sect2>
 <sect2 id="section.property.index.next">
  <title>index_next</title>
  <para>
   index_next est utilisé pour afficher la valeur théorique suivante de
   index. Dans la dernière boucle, celà reste la valeur incrémentée,
   qui respecte l'attribut step si donné.
  </para>
  <example>
   <title>propriété de section index_next</title>
   <programlisting>
<![CDATA[
  {section name=client loop=$idClient}
  {$smarty.section.client.index} id: {$idClient[client]}<br />
  {* Pour votre information, $idClient[client.index] and $idClient[client] sont identiques *}
  {if $idClient[client.index_next] ne $idClient[client.index]}
  L'id du client va changer<br />
  {/if}
  {/section}
]]>
   </programlisting>
   <para>
    L'exemple ci-dessus affichera :
   </para>
   <screen>
<![CDATA[
  0 id: 1000<br />
  L'id du client va changer<br />
  1 id: 1001<br />
  L'id du client va changer<br />
  2 id: 1002<br />
  L'id du client va changer<br />
]]>
   </screen>
  </example>
 </sect2>
 <sect2 id="section.property.iteration">
  <title>iteration</title>
  <para>
   iteration est utilisé pour afficher la valeur courante de l'iteration.
  </para>
  <para>
   NOTE: Cette valeur n'est pas affectée par les attributs start, step et
   max, à l'inverse de la propriété index. L'itération commence par
   1 et non par 0 (comme le fait index). rownum est un alias de iteration,
   ils fonctionnent de la même façon.
  </para>
  <example>
   <title>propriété iteration de section</title>
   <programlisting>
<![CDATA[
  {section name=client loop=$idClient start=5 step=2}
  Iteration courante: {$smarty.section.client.iteration}<br />
  {$smarty.section.client.index} id: {$idClient[client]}<br />
  {* Pour votre information, $idClient[client.index] and $idClient[client] sont identiques *}
  {if $idCLient[client.index_next] ne $idClient[client.index]}
    L'id du client va changer<br />
  {/if}
  {/section}
]]>
   </programlisting>
   <para>
    L'exemple ci-dessus affichera :
   </para>
   <screen>
<![CDATA[
  Iteration courante: 1
  5 id: 1000<br />
    L'id du client va changer<br />
  Iteration courante: 2
  7 id: 1001<br />
    L'id du client va changer<br />
  Iteration courante: 3
  9 id: 1002<br />
    L'id du client va changer<br />
]]>
   </screen>
  </example>
 </sect2>
 <sect2 id="section.property.first">
  <title>first</title>
  <para>
   first est à true lorsque la section est parcouru pour la première fois.
  </para>
  <example>
   <title>propriété first de la section</title>
   <programlisting>
<![CDATA[
  {section name=client loop=$idClient}
  {if $smarty.section.client.first}
  <table>
  {/if}

  <tr><td>{$smarty.section.client.index} id:
     {$idClient[client]}</td></tr>

  {if $smarty.section.client.last}
    </table>
  {/if}
  {/section}
]]>
   </programlisting>
   <para>
    L'exemple ci-dessus affichera :
   </para>
   <screen>
<![CDATA[
  <table>
  <tr><td>0 id: 1000</td></tr>
  <tr><td>1 id: 1001</td></tr>
  <tr><td>2 id: 1002</td></tr>
  </table>
]]>
   </screen>
  </example>
 </sect2>
 <sect2 id="section.property.last">
  <title>last</title>
  <para>
   last est à true lorsque la section est parcourue pour la dernière fois.
  </para>
  <example>
   <title>Propriété last de section</title>
   <programlisting>
<![CDATA[
  {section name=client loop=$idClient}
  {if $smarty.section.client.first}
    <table>
  {/if}

  <tr><td>{$smarty.section.client.index} id:
    {$idClient[client]}</td></tr>

  {if $smarty.section.client.last}
    </table>
  {/if}
  {/section}
]]>
   </programlisting>
   <para>
    L'exemple ci-dessus affichera :
   </para>
   <screen>
<![CDATA[
  <table>
  <tr><td>0 id: 1000</td></tr>
  <tr><td>1 id: 1001</td></tr>
  <tr><td>2 id: 1002</td></tr>
  </table>
]]>
   </screen>
  </example>
 </sect2>
 <sect2 id="section.property.rownum">
  <title>rownum</title>
  <para>
   rownum, utilisé pour afficher la valeur courante de l'itération,
   commence par 1. C'est un alias de iteration, ils fonctionnent de façon
   identique.
  </para>
  <example>
   <title>propriété rownum de section</title>
<programlisting>
<![CDATA[
  {section name=client loop=$idClient}
  {$smarty.section.client.rownum} id: {$idClient[client]}<br />
  {/section}
]]>
   </programlisting>
   <para>
    L'exemple ci-dessus affichera :
   </para>
   <screen>
<![CDATA[
  1 id: 1000<br />
  2 id: 1001<br />
  3 id: 1002<br />
]]>
   </screen>
  </example>
 </sect2>
 <sect2 id="section.property.loop">
  <title>loop</title>
  <para>
   loop est utilisé pour afficher la dernière valeur de index que cette
   section a utilisé. Peut être utilisé dans ou en dehors de la section.
  </para>
  <example>
   <title>Propriété de section index</title>
<programlisting>
<![CDATA[
  {section name=client loop=$idClient}
  {$smarty.section.client.index} id: {$idClient[client]}<br />
  {/section}

  Il y eu {$smarty.section.client.loop} clients d'affichés.
]]>
   </programlisting>
   <para>
    L'exemple ci-dessus affichera :
   </para>
   <screen>
<![CDATA[
  0 id: 1000<br />
  1 id: 1001<br />
  2 id: 1002<br />

  il y eu 3 clients d'affichés.
]]>
   </screen>
  </example>
 </sect2>
 <sect2 id="section.property.show">
  <title>show</title>
  <para>
   <emphasis>show</emphasis> est utilisé comme paramètre de section.
   <emphasis>show</emphasis> est une valeur booléenne, true ou false.
   Si show est à "false", la section ne sera pas affichée. Si un
   sectionelse est présent, elle sera affiché.
  </para>
  <example>
   <title>section, attribut show</title>
   <programlisting>
<![CDATA[
  {* $show_client_info a pu être passé par le script PHP,
    pour déterminer si oui ou non on souhaite afficher la section *}
  {section name=client loop=$idClient show=$show_client_info}
  {$smarty.section.client.rownum} id: {$idClient[client]}<br />
  {/section}

  {if $smarty.section.client.show}
    la section à été affichée.
  {else}
    la section n'a pas été affichée.
  {/if}
]]>
   </programlisting>
   <para>
    L'exemple ci-dessus affichera :
   </para>
   <screen>
<![CDATA[
  1 id: 1000<br />
  2 id: 1001<br />
  3 id: 1002<br />

  la section à été affichée.
]]>
   </screen>
  </example>
 </sect2>
 <sect2 id="section.property.total">
  <title>total</title>
  <para>
   total est utilisé pour afficher le nombre d'itération que la section
   va exécuter. Peut être utilisé dans ou en dehors de la section.
  </para>
  <example>
   <title>section, propriété total</title>
   <programlisting>
<![CDATA[
  {section name=client loop=$idClient step=2}
  {$smarty.section.client.index} id: {$idClient[client]}<br />
  {/section}

  Il y eu {$smarty.section.client.total} clients affichés.
]]>
   </programlisting>
   <para>
    L'exemple ci-dessus affichera :
   </para>
   <screen>
<![CDATA[
  0 id: 1000<br />
  2 id: 1001<br />
  4 id: 1002<br />

  Il y eu 3 clients affichés.
]]>
   </screen>
  </example>
 </sect2>
</sect1>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"../../../../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
